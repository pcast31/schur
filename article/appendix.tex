\appendix


\section{SF-templates}
\renewcommand{\arraystretch}{1}

\begin{center}
SF-template with width 33 and 4 colors \\

\begin{tabular}{|*{2}{c|}}
	\hline
	1 & 1, 6, 9, 13, 16, 20, 24, 27, 31 \\
	\hline
	2 & 2, 5, 14, 15, 25, 26 \\
	\hline
	3 & 3, 4, 10, 11, 12, 28, 29, 30 \\
	\hline
	4 & 7, 8, 17, 18, 19, 21, 22, 23, 32, 33 \\
	\hline
\end{tabular}
\end{center}

\begin{center}
SF-template with width 111 and 5 colors \\

\begin{tabular}{|*{2}{c|}}
	\hline
	1 & 1, 5, 18, 12, 14 ,21, 23, 30, 32, 36, 39, 43, 45, 52, 103 \\
	 & 106, 110 \\
	\hline
	2 & 2, 6, 7, 10, 15, 18, 26, 29, 34, 37, 38, 42, 46, 51, 54 \\
	& 101, 104, 109 \\
	\hline
	3 & 3, 4, 9, 11, 17, 19, 25, 27, 33, 35, 40, 41, 47, 48, 55 \\
	& 100, 107, 108 \\
	\hline
	4 & 13, 16, 20, 22, 24, 28, 31, 58, 61, 67, 88, 94, 97 \\
	\hline
	5 & 44, 50, 53, 56, 57, 59, 60, 62, 63, 64, 65, 66, 68, 69, 70\\
	& 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85\\
	& 86, 87, 89, 90, 91, 92, 93, 95, 96, 98, 99, 102, 105, 111 \\
	\hline
\end{tabular}
\end{center}

\begin{center}
SF-template with width 380 and 6 colors \\

\begin{tabular}{|*{2}{c|}}
	\hline
	1 & 1, 5, 8, 11, 15, 17, 29, 33, 36, 39, 43, 57, 61, 88, 92 \\
	& 106, 110, 113, 116, 120, 132, 134, 138, 141, 144, 148, 150, 154, 157, 160 \\
	& 164, 178, 182, 185, 188, 341, 344, 347, 351, 365, 369, 372, 375, 379\\
	\hline
	2 & 2, 9, 13, 16, 20, 23, 24, 27, 28, 31, 34, 35, 38, 42, 45\\
	& 49, 53, 60, 67, 71, 78, 82, 89, 96, 100, 104, 107, 111, 114, 115\\
	& 118, 121, 122, 125, 126, 129, 133, 136, 140, 147, 158, 162, 165, 169, 172\\
	& 176, 183, 187, 194, 201, 328, 335, 342, 346, 353, 357, 360, 364, 367, 371\\
	\hline
	3 & 3, 4, 12, 14, 19, 25, 30, 32, 40, 41, 47, 48, 58, 91, 101\\
	& 102, 108, 109, 117, 119, 124, 130, 135, 137, 145, 146, 152, 153, 161, 163\\
	& 168, 179, 181, 190, 339, 348, 350, 361, 366, 368, 376, 377\\
	\hline
	4 & 6, 7, 10, 18, 21, 22, 26, 37, 46, 50, 51, 54, 65, 70, 79\\
	& 84, 95, 98, 99, 103, 112, 123, 127, 128, 131, 139, 142, 143, 151, 155\\
	& 156, 159, 167, 170, 171, 175, 186, 343, 354, 358, 359, 362, 370, 373, 374\\
	& 378\\
	\hline
	5 & 44, 52, 55, 56, 59, 62, 63, 64, 66, 68, 69, 72, 73, 74, 75\\
	& 76, 77, 80, 81, 83, 85, 86, 87, 90, 93, 94, 97, 105, 189, 196\\
	& 197, 200, 203, 206, 207, 209, 214, 219, 231, 298, 310, 315, 320, 322, 323\\
	& 326, 329, 332, 333, 340\\
	\hline
	6 & 149, 166, 173, 174, 177, 180, 184, 191, 192, 193, 195, 198, 199, 202, 204\\
	& 205, 208, 210, 211, 212, 213, 215, 216, 217, 218, 220, 221, 222, 223, 224\\
	& 225, 226, 227, 228, 229, 230, 232, 233, 234, 235, 236, 237, 238, 239, 240\\
	& 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255\\
	& 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270\\
	& 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285\\
	& 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 299, 300, 301\\
	& 302, 303, 304, 305, 306, 307, 308, 309, 311, 312, 313, 314, 316, 317, 318\\
	& 319, 321, 324, 325, 327, 330, 331, 334, 336, 337, 338, 345, 349, 352, 355\\
	& 356, 363, 380\\
	\hline
\end{tabular}
\end{center}


\section{WSF-templates}

\begin{center}
23-WSF-template with width 42 and 4 colors \\

\begin{tabular}{|*{2}{c|}}
	\hline
	1 & 1, 2, 4, 8, 11, 22, 25, \(\mathbf{(N+1)}\)\\
	\hline
	2 & 5, 6, 7, 19, 21, 23, 36\\
	\hline
	3 & 9, 10, 12, 13, 14, 15, 16, 17, 18, 20\\
	\hline
	4 & 24, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 37, 38, 39, 40\\
	& 41, 42\\
	\hline
\end{tabular}
\end{center}

This template provides the inequality \(\WS (n+3) \geqslant 42S(n) + 24\)
by placing one last number, here represented by \(\mathbf{(N+1)}\), in the first subset.

\resetarraystretch


%\section{Reformulation as a SAT problem}
%\label{SAT}
%
%\qquad In this section, we reframe the question of the existence of (weakly) sum-free partitions as a boolean
%satisfiability (SAT) problem. We encode the existence of (weakly) sum-free partitions as propositional formulae like in
%\cite{Heule2017} and then use SAT solvers to determine whether these formulae are satisfiable.
%
%\begin{definition}
%A \textit{literal} is either a variable \(v\) (a positive literal) or the negation \(\bar{v}\) of a variable \(v\) (a
%negative literal) where \(v\)
%takes a truth value: \(true\) or \(false\). A \textit{clause} is a disjunction of literals and a \textit{formula} is a
%conjunction of clauses: it
%is a propositional formula in \textit{conjonctive normal form} (CNF).
%\end{definition}
%
%\begin{definition}
%An \textit{assignment} is a function from a set of variables to the truth values \(true\) (1) and \(false\) (0). A
%literal \(l\) is
%\textit{satisfied} (\textit{falsified}) by an assignment \(\alpha\) if l is positive and \(\alpha(var (l)) = 1\)
%(resp. \(\alpha(var (l)) = 0\)) or if it is negative and \(\alpha(var (l)) = 0\) (resp. \(\alpha(var (l)) = 1\)). A
%clause is \textit{satisfied}
%by an assignment \(\alpha\) if it contains a literal that is satisfied by \(\alpha\). Finally, a formula is
%\textit{satisfied} by an assignment
%\(\alpha\) if all its clauses are satisfied by \(\alpha\). A formula is \textit{satisfiable} if there exists an
%assignment that satisfies it;
%otherwise it is \textit{unsatisfiable}.
%\end{definition}
%
%We then encode the existence of a partition of \([\![1,p]\!]\) in \(k\) weakly sum-free subsets as follows: for every
%integer
%\(i \in [\![1,p]\!]\), take \(k\) variables \(x^{(i)}_{1}, ..., x^{(i)}_{k}\) and for every \(\forall c \in [\![1,k]\!],
%x^{(i)}_c = 1 \iff i \in A_c\).
%The corresponding clauses are:
%
%\begin{itemize}
%\item \textbf{weakly sum-free:} \(\forall c \in [\![1,k]\!], \forall (i, j) \in [\![1,p]\!]^2, (i \neq j ~ \text{and} ~ i + j
%\leq n) \implies \lnot x^{(i)}_c
%\lor  \lnot x^{(i)}_c \lor \lnot x^{(i+j)}_c\)
%\item \textbf{union:} \(\forall i \in [\![1,p]\!], x^{(i)}_1 \lor ... \lor x^{(i)}_k\)
%\item \textbf{disjoint:} \(\forall i \in [\![1,p]\!],\forall (c_1, c_2) \in [\![1,k]\!]^2, c_1 \neq c_2 \implies \neg
%x^{(i)}_{c_1} \lor \neg x^{(i)}_{c_2}\)
%\end{itemize}
%
%In the above formula, every color plays a symmetric role. Hence the search space can reduced by \(k!\) by ordering the
%subsets, that is by
%enforcing that \(m_1 < ... < m_k\). The corresponding clauses are: \linebreak
%\textbf{symmetry breaking:} \(x^{(1)}_1 = 1\) and \(\forall c \in [\![2,k-1]\!], \forall i \in [\![1, \WS (c - 1)+1]\!],
%x^{(1)}_c \lor ... \lor x^{(i)}_c \lor \neg x^{(i+1)}_{c+1}\)
%
%\begin{remark}
%For a given problem, it can be interesting to try out different SAT solvers because the relative performance can vary
%significantly according to the problem.
%For instance, we used two different SAT solvers in the next two next subsections.
%\end{remark}
%
%\begin{remark}
%Using a parallel SAT solver usually reduces the computation time, especially when trying to show that a formula is
%unsatisfiable. However, most of the
%parallel SAT solver do not have a deterministic behaviour and it can results in a strong variation of running times.
%\end{remark}



\section{Proof of theorem \ref{theorem}}
\label{proof_theorem}

\begin{proof}[\textsc{Proof.}]
Let \((p,q), (n,k) \in (\mathbb{N}^*)^2\), \(N = p(q+\left \lceil \displaystyle \frac{q}{2} \right \rceil + 1)+q\),
\(\alpha = \left \lceil \displaystyle \frac{q}{2} \right \rceil > 0\) and \(\beta = q + \alpha + 1\).
We denote by \(f\) the coloring associated to the partition of \([\![1,q]\!]\) and \(g\) the
one associated to the partition of \([\![1,p]\!]\).
\[ f : [\![1,q]\!] \longrightarrow [\![1,n]\!] \text{ and } \forall (x,y) \in [\![1,q]\!]^2, \left\{
\begin{array}{ll}
	x \neq y \\
	f(x) = f(y)
\end{array}
\right.
\Longrightarrow f(x+y) \neq f(x)
\]
\[g : [\![1,p]\!] \longrightarrow [\![1,k]\!] \text{ and } \forall (x,y) \in [\![1,q]\!]^2 \text{, } f(x) = f(y)
\Longrightarrow f(x+y) \neq f(x)
\]
Let us start by parting the integers of \([\![1,N]\!]\) into two subsets \(\mathcal{A}\) and \(\mathcal{B}\) where
\(\mathcal{A} = [\![1,\alpha]\!] \cup \{a\beta + u \mid (a,u) \in [\![0,p]\!] \times [\![\alpha + 1,q]\!]\}\) and
\(\mathcal{B} = \{a\beta + u \mid (a,u) \in [\![1,p]\!] \times [\![-\alpha,\alpha]\!]\}\).\\
\\
First, \underline{\(\mathcal{A} \cap \mathcal{B} = \varnothing\)} : \\
By contradiction, suppose there exists \(x \in \mathcal{A} \cap \mathcal{B} \neq \varnothing \). Then there are \((a,u)
\in [\![0,p]\!] \times [\![\alpha + 1,q]\!]\) and \((b,v) \in [\![1,p]\!] \times [\![-\alpha,\alpha]\!]\) such that \(x
= a\beta + u = b\beta +v\). By definition of \(\alpha\) and \(\beta\) we have \(u \in [\![\alpha + 1,q]\!] \subset
[\![0,\beta - 1]\!]\).
From there, we distinguish two cases :
\begin{itemize}
\item If \(v \in [\![0,\alpha]\!]\) then \(v \in [\![0,\beta - 1]\!]\) and \(v \neq u\) because \(v < \alpha + 1
\leqslant u\)
\item If \(v \in [\![-\alpha,-1]\!]\), we note \(\tilde{v} = \beta + v\) and thus have \(x = (b-1)\beta + \tilde{v}\)
with \(\tilde{v} \in [\![\beta - \alpha,\beta - 1]\!] \subset [\![0,\beta - 1]\!]\) and \(\tilde{v} \neq u\) because
\(u< q+1 = \beta - \alpha \leqslant \tilde{v}\).
\end{itemize}
In either cases, we run into a contradiction because of the remainder's uniqueness in the euclidean division of \(x\)
by\(\beta\).\\
\\
Then, we have \underline{\(\mathcal{A} \cup \mathcal{B} = [\![1,N]\!]\)}:
\begin{itemize}
	\item On the one hand : \(1 = \text{min}(\mathcal{A}) \leqslant \text{max}(\mathcal{A}) = p\beta + q = N\) and
\(1 \leqslant \beta - \alpha = \text{min}(\mathcal{B}) \leqslant \text{max}(\mathcal{B}) = p\beta + \alpha \leqslant
N\),
	which gives \(\mathcal{A} \cup \mathcal{B} \subset [\![1,N]\!]\).
\item On the other hand, let \(x \in [\![1,N]\!]\). If \(x \leqslant \alpha\), we directly have \(x \in \mathcal{A}\),
let us then suppose that \(x > \alpha\) and write \(x = a\beta + u\)
the euclidean division of \(x\) by \(\beta\). We have \(x \leqslant N\), thus \(a \leqslant p\). We distinguish three
cases : \\
- If \(u \in [\![0,\alpha]\!]\) then we necessarily have \(a \geqslant 1\) because \(x > \alpha\), and so \(x \in
\mathcal{B}\).\\
	- If \(u \in [\![\alpha + 1,q]\!]\), then \(x \in \mathcal{A}\). \\
- If \(u \in [\![q + 1,\beta - 1]\!]\) then \(x = (a+1)\beta - (\beta - u)\) with \(-\alpha \leqslant \beta - u
\leqslant 0\).
	Furthermore, \(a \leqslant p - 1\), else we would have \(x > N\), and so \(x \in \mathcal{B}\) \\
In any case, \(x \in \mathcal{A} \cup \mathcal{B}\) and we can thus conclude that \([\![1,N]\!] \subset \mathcal{A}
\cup\mathcal{B}\).
\end{itemize}
This first partition of \([\![1,N]\!]\) will help us to define our final partition by the projection of its equivalence
relation.
We thereby define \(h : [\![1,N]\!] \longrightarrow [\![1,n+k]\!]\) as such :\\
- If \(x \in \mathcal{A}\) then \(h(x) = f(x \text{ mod } \beta)\) (well defined because \(x \text{ mod } \beta \in
[\![1,N]\!]\))\\
- If \(x \in \mathcal{B}\) then \(x = a\beta + u\) with a unique \((a,u) \in [\![1,p]\!] \times
[\![-\alpha,\alpha]\!]\)and we define \(h(x) = n + g(a)\)\\
The fact that \((\mathcal{A}, \mathcal{B})\) is a partition of \([\![1,N]\!]\) ensures that this definition of \(h\) is
valid. We then have to verify that \(h\) induces weakly sum-free subsets.\\
\\
\underline{The classes of equivalence \(h(x)\) for \(x \in \mathcal{A}\) are weakly sum-free :}
\\
\\
Let \((x,y) \in \mathcal{A}^2\) such that \(h(x) = h(y)\), \(x \neq y\) and \(x + y \leqslant N\)
\begin{itemize}
	\item If \((x,y) \in [\![1,\alpha]\!]^2\) :\\
	We have \(x + y \leqslant 2\alpha \leqslant q\) and \(x + y = 0\beta + x + y\), therefore \(x + y \in \mathcal{A}\).
Then, by definition : \(h(x) = f(x)\), \(h(y) = f(y)\) and \(h(x+y) = f(x+y)\), which gives us, thanks to the property
verified by \(f\), that \(h(x+y) \neq h(x)\).
	\item If \((x,y) \in [\![1,\alpha]\!] \times ( \mathcal{A} \text{ \textbackslash} ~ [\![1,\alpha]\!] )\) :\\
We write \(y = a\beta + u\) with \((a,u) \in [\![0,p]\!] \times [\![\alpha + 1,q]\!]\). Then \(x+y = a\beta + x + u =
(a+1)\beta + x + u - \beta\),
and if \(x + u > q\) it follows that \(a \leqslant p-1\) since \(x+y \leqslant N\), and \(-\alpha \leqslant x + u -
\beta \leqslant -1\).
Therefore \(x+y \in \mathcal{B}\) and \(h(x+y) \neq h(x) = f(x)\) by definition of h. On the contrary, if \(x - u
\leqslant n\),
then \(x+y \in \mathcal{A}\) and \(h(x+y) = f(x+u)\) because \(x+u\) is actually the remainder of the euclidean
divisionof \(x+y\) by \(\beta\).
Moreover, \(h(x) = f(x)\), \(x < u\) and, with our initial hypothesis, \(h(x) = h(y) = f(u)\). The property verified by
\(f\) gives us \(f(x+u) \neq f(x)\) which can be rewritten as \(h(x+y) \neq h(x)\).
	\item If \((x,y) \in ( \mathcal{A} \text{ \textbackslash} ~ [\![1,\alpha]\!] ) \times [\![1,\alpha]\!]\) : \\
	This case is handled exactly like the previous one by swaping the roles of \(x\) and \(y\).
	\item If \((x,y) \in ( \mathcal{A} \text{ \textbackslash} ~ [\![1,\alpha]\!] )^2\) : \\
We write \(x = a\beta + u\) and \(y = b\beta + v\) with \((a,u)\) and \((b,v)\) in \([\![0,p]\!] \times [\![\alpha +
1,q]\!]\). Then \(x+y = (a+b)\beta + u+v = (a+b+1)\beta + u + v - \beta\)
with \(a+b \leqslant p-1\) (else we would have \(x+y > N\) because \(u+v > q\)) and \(-\alpha \leqslant u + v - \beta
\leqslant \alpha\), therefore \(x+y \in \mathcal{B}\) and by definition \(h(x+y) \neq h(x)\).
\end{itemize}
In any case, \(h(x+y) \neq h(x)\) and the classes of equivalence \(h(x)\) for \(x \in \mathcal{A}\) are weakly
sum-free.\\
\\
\underline{The classes of equivalence \(h(x)\) for \(x \in \mathcal{B}\) are weakly sum-free :}
\\
\\
Let \((x,y) \in \mathcal{B}^2\) such that \(h(x) = h(y)\), \(x \neq y\) and \(x + y \leqslant N\).\\
We write \(x = a\beta + u\) and \(y = b\beta + v\) with \((a,u)\) and \((b,v)\) in \([\![1,p]\!] \times
[\![-\alpha,\alpha]\!]\).
We have \(h(x) = q + g(a)\) and \(h(y) = q + g(b)\), therefore \(g(a) = g(b)\). We also have \(x+y = (a+b)\beta + u
+v\).\\
If \(u + v \in [\![-\alpha,\alpha]\!]\), then \(x+y \in \mathcal{B}\) and \(h(x+y) = g(a+b)\), hence we can deduce that
\(h(x+y) \neq h(x)\) because of the property verified by \(g\). On the contrary, if \(u+v \notin
[\![-\alpha,\alpha]\!]\), then necessarily \(x+y \in \mathcal{A}\). Suppose \(x+y \in \mathcal{B}\), then \(x+y =
c\beta+ w\) with \((c,w) \in [\![1,p]\!] \times [\![-\alpha,\alpha]\!]\). Thus, \(c\beta + w = (a+b)\beta + u + v\) and
\((a+b-c)\beta = w-u-v\). Furthermore \(a+b-c \neq 0\), else we would have \(u+v = w \in [\![-\alpha,\alpha]\!]\). This
finally leads to the following inequality :
\[\beta \leqslant |a+b-c|\beta = |w-u-v| \leqslant |w| + |u| + |v| \leqslant 3\alpha \leqslant q + \alpha < \beta
\]
which is absurd. We can therefore conclude that \(x+y \in \mathcal{A}\) and by definition of \(h\), \(h(x+y) \neq
h(x)\), proving that the classes of equivalence \(h(x)\) for \(x \in \mathcal{B}\) are weakly sum-free.\\
\\
Finally, we have showed that every classe of equivalence induced by \(h\) is weakly sum-free, which ends the proof. \\
\end{proof}
