\section{Weak Schur numbers}

In this section, we generalize Rowley's constructions in \cite{RowleyWS}. We then introduce, by analogy with the third
section, the
integer \(WS^+(n)\)
to build suitable templates.

\subsection{Lower bound for Weak Schur numbers using Schur and Weak Schur numbers}

Up to now, there was no equivalent for weak Schur numbers of Abott and Hanson's construction \cite{AbbottHanson}. Here
we
give a general lower bound for weak Schur numbers as a function of both regular and weak Schur numbers.
The following theorem, inspired by Rowley's inequalities for \(WS(n+1)\) and \(WS(n+2)\), was found and proved
by Romain Ageron.

\begin{theorem}
Let \((p,q), (n,k) \in (\mathbb{N}^*)^2\). If there exists a partition of \([\![1,q]\!]\) into \(n\) weakly sum-free
subsets and a partition of \([\![1,p]\!]\) into \(k\) sum-free
subsets then there exists a partition of \([\![1,p(q+\left \lceil \frac{q}{2} \right \rceil + 1)+q]\!]\) into \(n+k\)
weakly sum-free subsets.
\end{theorem}
In particular, if we choose \(q = WS(n)\) and \(p = S(k)\) in the last theorem, the next corollary follows.
\begin{corollary}
\( \forall (n,k) \in (\mathbb{N}^*)^2 \text{, } WS(n+k) \geqslant S(k) \left (WS(n) + \left \lceil \frac{WS(n)}{2}
\right \rceil +1 \right) + WS(n)\)
\end{corollary}
\textsc{Proof :} Let \((p,q), (n,k) \in (\mathbb{N}^*)^2\), \(N = p(q+\left \lceil \frac{q}{2} \right \rceil + 1)+q\),
\(\alpha = \left \lceil \frac{q}{2} \right \rceil > 0\) and \(\beta = q + \alpha + 1\).
We denote by \(f\) the projection of the equivalence relation induced by the partition of \([\![1,q]\!]\) and \(g\) the
one induced by the partition of \([\![1,p]\!]\). Each equivalence class is represented by a single integer, therefore :
\[ f : [\![1,q]\!] \longrightarrow [\![1,n]\!] \text{ and } \forall (x,y) \in [\![1,q]\!]^2, \left\{
\begin{array}{ll}
	x \neq y \\
	f(x) = f(y)
\end{array}
\right.
\Longrightarrow f(x+y) \neq f(x)
\]
\[g : [\![1,p]\!] \longrightarrow [\![1,k]\!] \text{ and } \forall (x,y) \in [\![1,q]\!]^2 \text{, } f(x) = f(y)
\Longrightarrow f(x+y) \neq f(x)
\]
Let us start by parting the integers of \([\![1,N]\!]\) in two subsets \(\mathcal{A}\) and \(\mathcal{B}\) where
\(\mathcal{A} = [\![1,\alpha]\!] \cup \{a\beta + u \mid (a,u) \in [\![0,p]\!] \times [\![\alpha + 1,q]\!]\}\) and
\(\mathcal{B} = \{a\beta + u \mid (a,u) \in [\![1,p]\!] \times [\![-\alpha,\alpha]\!]\}\).\\
\\
First, \underline{\(\mathcal{A} \cap \mathcal{B} = \varnothing\)} : \\
By contradiction, suppose there exists \(x \in \mathcal{A} \cap \mathcal{B} \neq \varnothing \). Then there are \((a,u)
\in [\![0,p]\!] \times [\![\alpha + 1,q]\!]\) and \((b,v) \in [\![1,p]\!] \times [\![-\alpha,\alpha]\!]\) such that \(x
= a\beta + u = b\beta +v\). By definition of \(\alpha\) and \(\beta\) we have \(u \in [\![\alpha + 1,q]\!] \subset
[\![0,\beta - 1]\!]\).
From there, we distinguish two cases :
\begin{itemize}
\item If \(v \in [\![0,\alpha]\!]\) then \(v \in [\![0,\beta - 1]\!]\) and \(v \neq u\) because \(v < \alpha + 1
\leqslant u\)
\item If \(v \in [\![-\alpha,-1]\!]\), we note \(\tilde{v} = \beta + v\) and thus have \(x = (b-1)\beta + \tilde{v}\)
with \(\tilde{v} \in [\![\beta - \alpha,\beta - 1]\!] \subset [\![0,\beta - 1]\!]\) and \(\tilde{v} \neq u\) because
\(u< q+1 = \beta - \alpha \leqslant \tilde{v}\).
\end{itemize}
In either cases, we run into a contradiction because of the remainder's uniqueness in the euclidean division of \(x\)
by\(\beta\).\\
\\
Then, we have \underline{\(\mathcal{A} \cup \mathcal{B} = [\![1,N]\!]\)}:
\begin{itemize}
	\item On the one hand : \(1 = \text{min}(\mathcal{A}) \leqslant \text{max}(\mathcal{A}) = p\beta + q = N\) and
\(1 \leqslant \beta - \alpha = \text{min}(\mathcal{B}) \leqslant \text{max}(\mathcal{B}) = p\beta + \alpha \leqslant
N\),
	which gives \(\mathcal{A} \cup \mathcal{B} \subset [\![1,N]\!]\).
\item On the other hand, let \(x \in [\![1,N]\!]\). If \(x \leqslant \alpha\), we directly have \(x \in \mathcal{A}\),
let us then suppose that \(x > \alpha\) and write \(x = a\beta + u\)
the euclidean division of \(x\) by \(\beta\). We have \(x \leqslant N\), thus \(a \leqslant p\). We distinguish three
cases : \\
- If \(u \in [\![0,\alpha]\!]\) then we necessarily have \(a \geqslant 1\) because \(x > \alpha\), and so \(x \in
\mathcal{B}\).\\
	- If \(u \in [\![\alpha + 1,q]\!]\), then \(x \in \mathcal{A}\). \\
- If \(u \in [\![q + 1,\beta - 1]\!]\) then \(x = (a+1)\beta - (\beta - u)\) with \(-\alpha \leqslant \beta - u
\leqslant 0\).
	Furthermore, \(a \leqslant p - 1\), else we would have \(x > N\), and so \(x \in \mathcal{B}\) \\
In any case, \(x \in \mathcal{A} \cup \mathcal{B}\) and we can thus conclude that \([\![1,N]\!] \subset \mathcal{A}
\cup\mathcal{B}\).
\end{itemize}
This first partition of \([\![1,N]\!]\) will help us to define our final partition by the projection of its equivalence
relation.
We thereby define \(h : [\![1,N]\!] \longrightarrow [\![1,n+k]\!]\) as such :\\
- If \(x \in \mathcal{A}\) then \(h(x) = f(x \text{ mod } \beta)\) (well defined because \(x \text{ mod } \beta \in
[\![1,N]\!]\))\\
- If \(x \in \mathcal{B}\) then \(x = a\beta + u\) with a unique \((a,u) \in [\![1,p]\!] \times
[\![-\alpha,\alpha]\!]\)and we define \(h(x) = n + g(a)\)\\
The fact that \((\mathcal{A}, \mathcal{B})\) is a partition of \([\![1,N]\!]\) ensures that this definition of \(h\) is
valid. We then have to verify that \(h\) induces weakly sum-free subsets.\\
\\
\underline{The classes of equivalence \(h(x)\) for \(x \in \mathcal{A}\) are weakly sum-free :}
\\
\\
Let \((x,y) \in \mathcal{A}^2\) such that \(h(x) = h(y)\), \(x \neq y\) and \(x + y \leqslant N\)
\begin{itemize}
	\item If \((x,y) \in [\![1,\alpha]\!]^2\) :\\
	We have \(x + y \leqslant 2\alpha \leqslant q\) and \(x + y = 0\beta + x + y\), therefore \(x + y \in \mathcal{A}\).
Then, by definition : \(h(x) = f(x)\), \(h(y) = f(y)\) and \(h(x+y) = f(x+y)\), which gives us, thanks to the property
verified by \(f\), that \(h(x+y) \neq h(x)\).
	\item If \((x,y) \in [\![1,\alpha]\!] \times ( \mathcal{A} \text{ \textbackslash} ~ [\![1,\alpha]\!] )\) :\\
We write \(y = a\beta + u\) with \((a,u) \in [\![0,p]\!] \times [\![\alpha + 1,q]\!]\). Then \(x+y = a\beta + x + u =
(a+1)\beta + x + u - \beta\),
and if \(x + u > q\) it follows that \(a \leqslant p-1\) since \(x+y \leqslant N\), and \(-\alpha \leqslant x + u -
\beta \leqslant -1\).
Therefore \(x+y \in \mathcal{B}\) and \(h(x+y) \neq h(x) = f(x)\) by definition of h. On the contrary, if \(x - u
\leqslant n\),
then \(x+y \in \mathcal{A}\) and \(h(x+y) = f(x+u)\) because \(x+u\) is actually the remainder of the euclidean
divisionof \(x+y\) by \(\beta\).
Moreover, \(h(x) = f(x)\), \(x < u\) and, with our initial hypothesis, \(h(x) = h(y) = f(u)\). The property verified by
\(f\) gives us \(f(x+u) \neq f(x)\) which can be rewritten as \(h(x+y) \neq h(x)\).
	\item If \((x,y) \in ( \mathcal{A} \text{ \textbackslash} ~ [\![1,\alpha]\!] ) \times [\![1,\alpha]\!]\) : \\
	This case is handled exactly like the previous one by swaping the roles of \(x\) and \(y\).
	\item If \((x,y) \in ( \mathcal{A} \text{ \textbackslash} ~ [\![1,\alpha]\!] )^2\) : \\
We write \(x = a\beta + u\) and \(y = b\beta + v\) with \((a,u)\) and \((b,v)\) in \([\![0,p]\!] \times [\![\alpha +
1,q]\!]\). Then \(x+y = (a+b)\beta + u+v = (a+b+1)\beta + u + v - \beta\)
with \(a+b \leqslant p-1\) (else we would have \(x+y > N\) because \(u+v > q\)) and \(-\alpha \leqslant u + v - \beta
\leqslant \alpha\), therefore \(x+y \in \mathcal{B}\) and by definition \(h(x+y) \neq h(x)\).
\end{itemize}
In any case, \(h(x+y) \neq h(x)\) and the classes of equivalence \(h(x)\) for \(x \in \mathcal{A}\) are weakly
sum-free.\\
\\
\underline{The classes of equivalence \(h(x)\) for \(x \in \mathcal{B}\) are weakly sum-free :}
\\
\\
Let \((x,y) \in \mathcal{B}^2\) such that \(h(x) = h(y)\), \(x \neq y\) and \(x + y \leqslant N\).\\
We write \(x = a\beta + u\) and \(y = b\beta + v\) with \((a,u)\) and \((b,v)\) in \([\![1,p]\!] \times
[\![-\alpha,\alpha]\!]\).
We have \(h(x) = q + g(a)\) and \(h(y) = q + g(b)\), therefore \(g(a) = g(b)\). We also have \(x+y = (a+b)\beta + u
+v\).\\
If \(u + v \in [\![-\alpha,\alpha]\!]\), then \(x+y \in \mathcal{B}\) and \(h(x+y) = g(a+b)\), hence we can deduce that
\(h(x+y) \neq h(x)\) because of the property verified by \(g\). On the contrary, if \(u+v \notin
[\![-\alpha,\alpha]\!]\), then necessarily \(x+y \in \mathcal{A}\). Suppose \(x+y \in \mathcal{B}\), then \(x+y =
c\beta+ w\) with \((c,w) \in [\![1,p]\!] \times [\![-\alpha,\alpha]\!]\). Thus, \(c\beta + w = (a+b)\beta + u + v\) and
\((a+b-c)\beta = w-u-v\). Furthermore \(a+b-c \neq 0\), else we would have \(u+v = w \in [\![-\alpha,\alpha]\!]\). This
finally leads to the following inequality :
\[\beta \leqslant |a+b-c|\beta = |w-u-v| \leqslant |w| + |u| + |v| \leqslant 3\alpha \leqslant q + \alpha < \beta
\]
which is absurd. We can therefore conclude that \(x+y \in \mathcal{A}\) and by definition of \(h\), \(h(x+y) \neq
h(x)\), proving that the classes of equivalence \(h(x)\) for \(x \in \mathcal{B}\) are weakly sum-free.\\
\\
Finally, we have showed that every classe of equivalence induced by \(h\) is weakly sum-free, which ends the proof.

\begin{remark}
This formula includes the results of Rowley \cite{RowleyWS} as a special case. For \(n>2\),
this formula does not give new lower bounds but in the same way as we introduced \(S^+\)\hyperref[SE]{(Definition
3.1)},we will define \(WS^+\) and find inequalities between \(WS^+\),\(WS\) and \(S\)
\end{remark}

\subsection{Definition of \(WS^+\)}

We will now define notations and results, we will use in the following theorem. 

\begin{notation}

Let (a,b) \(n \in (\mathbb{N}^*)^2\),\(a>b\), we will define \(\pi_{a,b}\) the projection:
\[ \pi_{a,b}:x->(Id+a\mathbf{1}_{ [\![0,b]\!]})(\text{x mod a}))\]
\end{notation}
 
We will note  the projection \(\pi\) and not \(\pi_{a,b}\) when there is no doubt about the a and b we use.

\begin{proposition}
Let x \(\in [\![1,b]\!]\), let y \(\in \mathbb{N}^*\) such that \(x+\pi(y)\leqslant a+b\), then we have: \(\pi(x+y)=x+\pi(y)\)
\end{proposition}

\textsc{Proof :}Let x \(\in [\![1,b]\!]\), let y \(\in \mathbb{N}^*\) such that \(x+\pi(y)\leqslant a+b\)

if \(x+\pi(y)< a:\)we remark that \(\pi(y)>b\) and therefore \(x+\pi(y)>b\):

\begin{align*}
 \pi(x+y) & = (Id+a\mathbf{1}_{ [\![0,b]\!]})(\text{x+y mod a})\\
& = (Id+a\mathbf{1}_{ [\![0,b]\!]})(x+\pi(y)\text{ mod a) since } \pi(y)\text{=y mod a} \\
& =x+ \pi(y)
\end{align*}

if \(x+\pi(y\geqslant a\):
\begin{align*}
 \pi(x+y) & = (Id+a\mathbf{1}_{ [\![0,b]\!]})(\text{x+y mod a})\\
& = (Id+a\mathbf{1}_{ [\![0,b]\!]})(x+\pi(y)\text{ mod a) since } \pi(y)\text{=y mod a} \\
& = (Id+a\mathbf{1}_{ [\![0,b]\!]})(x+\pi(y) - a) \\
& = x+\pi(y) - a +a\mathbf{1}_{ [\![0,b]\!]})(x+\pi(y) - a) \\
& = x+\pi(y) - a +a \text{ \quad since } x+\pi(y) - a \in [\![0,b]\!] \\
& = x+\pi(y)
\end{align*}


\begin{proposition}
Let (x,y)\(\in (\mathbb{N}^*)^2\), \(\pi(\pi(x)+\pi(y))=\pi(x+y)\)
\end{proposition}

\textsc{Proof :}Let (x,y)\(\in (\mathbb{N}^*)^2\),

\begin{align*}
 \\\pi(\pi(x)+\pi(y)) & = (Id+a\mathbf{1}_{ [\![0,b]\!]})(\pi(x)+\pi(y)\text{ mod a})\\
& = (Id+a\mathbf{1}_{ [\![0,b]\!]})((Id+a\mathbf{1}_{ [\![0,b]\!]})(\text{x mod a})+(Id+a\mathbf{1}_{ [\![0,b]\!]})(\text{y mod a})\text{ mod a}) \\
& = (Id+a\mathbf{1}_{ [\![0,b]\!]})(\text{ ((x mod a) + (y mod a)) mod a})\\
& =(Id+a\mathbf{1}_{ [\![0,b]\!]})(\text{ x+y mod a})\\
& =\pi(x+y)
\end{align*}


\begin{notation}

Let (a,b) \(n \in (\mathbb{N}^*)^2\),\(a>b\), we will define \(\lambda_{a,b}\) the projection:
\[ \lambda_{a,b}:x->1+ \left\lfloor\dfrac{x-b-1}{a}\right\rfloor\]
\end{notation}

We will note  the projection \(\lambda\) and not \(\lambda_{a,b}\) when there is no doubt about the a and b we use.

\begin{remark}
In the following theorem, \(\lambda\) is the function which return the line number of an element x.
\end{remark}

\begin{proposition}
Let (a,b)\(\in (\mathbb{N}^*)^2\), \(a>b\), let x \(\in \mathbb{N}^*\), \(x=a\lambda(x)+\pi(x)-a\)
\end{proposition}
\textsc{Proof :}Let (a,b)\(\in (\mathbb{N}^*)^2\), \(a>b\), let x \(\in \mathbb{N}^*\),
\\\\ \(a\lambda(x)+\pi(x)-a=a\left\lfloor\dfrac{x-b-1}{a}\right\rfloor+(\text{x mod a})+\mathbf{1}_{ [\![0,b]\!]}(\text{x mod a})\)

if x mod a \(>b\): \(a\lambda(x)+\pi(x)-a=a\left\lfloor\dfrac{x}{a}\right\rfloor+\text{x mod a}=x\)

if x mod a \(\leqslant b\):
\(a\lambda(x)+\pi(x)-a=a(\left\lfloor\dfrac{x}{a}\right\rfloor-1)+\text{x mod a}+a=x\)
\begin{definition}
Let \( (p,k,b) \in (\mathbb{N}^*)^3\), Let \((A_1,....,A_k)\) a partition of  \([\![1, p]\!]\).
This partition is said to be a b-weakly-sum-free template (b-WSF-template) of \(k\) colors and lenght \(p\) when:
\\\\
\underline{\(\forall i \in [\![1, k]\!], \quad A_i\) is weakly-sum-free}
\\\\
\underline{\(\forall i \in [\![1, k]\!], \quad A_i\backslash [\![1, b]\!]\) is sum-free}
\\\\
\underline{For \(A_k\) (the special subset):} \quad \(\forall (x,y) \in A_k^2,\)
\\
\[if \quad x+y>b+2(p-b),\quad x+y-2(p-b)\notin A_k\]
\\
\underline{For the others subsets:}\quad \(\forall i \in [\![0,k-1]\!], \forall(x,y) \in A_i^2\)
\\
\[
(Id+(p-b)\mathbf{1}_{ [\![0,b]\!]})(x+y ~\text{mod}~ (p-b)) \notin A_i
\]
\end{definition}

\begin{definition}
Let \( (k,b) \in (\mathbb{N}^*)^2\). If there exist \(p\) such that exists a partition of \([\![1, p]\!]\) into \(k\)
subsets which is a \(b\)-WS-template of \(k\) colors and lenght \(p\), we note:
\\\\\(WS_b^+=-b+\max \{p\in \mathbb{N}^*\)/ there exists a partition of \([\![1, p]\!]\) into \(k\) subsets which is a
\(b\)-WSF-template of \(k\) colors and lenght \(p\) \}
\\\\
If this \(p\) does not exist, we set \(WS_b^+= 0\)
\end{definition}

\begin{definition}
Let \( n \in \mathbb{N}^*\), we define \(WS^+(n)\)=\(\max_{b\in \mathbb{N}^*} \{WS_b^+(n)\}\)
\end{definition}


\subsection{Lower bound for Weak schur numbers using Schur and Weak Schur template numbers}


\begin{theorem}
Let \((q,n,b) \in (\mathbb{N}^*)^3\), let \( (p,k) \in (\mathbb{N}^*)^2\). If there exists a partition of \(k\)
sum-free subsets of \([\![1,p]\!]\) and a partition of n subsets \((A_1,....,A_n)\) of \([\![1, q]\!]\) which is a
\(b\)-WSF of \(n\) colors and lenght \(q\),
 then there exists a partition of \([\![1, b+p \times (q-b)]\!]\) into \((k+n-1)\) weakly sum-free subsets.
\end{theorem}

In particular, if we choose \(p = S(k)\) and \(q = WS^+(n)\) in the last theorem, the next corollary follows.


\begin{corollary}
\( \forall (n,k) \in (\mathbb{N}^*)^2 \text{, } let ~ b_{max}=max \{b\in \mathbb{N}^*/WS^+(n+1)=WS_b^+(n+1)\},\) \[
WS(n+k) \geqslant S(k) WS^+(n+1)+b_{max}\]
\end{corollary}

\renewcommand{\arraystretch}{2}
\begin{center}
\[
\begin{array}{|c|c|c|c|c|c|c|c|c|>{\columncolor{blue}}c|>{\columncolor{blue}}c|>{\columncolor{blue}}c|>{\columncolor{green}} c|}
\cline{6-9}
   \multicolumn{5}{c|}{} & \cellcolor{green}1 & \cellcolor{green}2 & \cellcolor{blue} 3&\cellcolor{green}4&5&6&7&8 \\
\hline
   \cellcolor{red}9 & \cellcolor{red}10 & \cellcolor{red}11 & \cellcolor{red}12 &\cellcolor{red}13&\cellcolor{red}14&\cellcolor{red}15&\cellcolor{red}16&\cellcolor{red}17&18&19&20&21\\
\hline
\cellcolor{yellow}22&\cellcolor{yellow}23&\cellcolor{yellow}24&\cellcolor{yellow}25&\cellcolor{yellow}26&\cellcolor{yellow}27&\cellcolor{yellow}28&\cellcolor{yellow}29&\cellcolor{yellow}30&31&32&33&34\\
\hline
...\cellcolor{yellow}&...\cellcolor{yellow}&...\cellcolor{yellow}&...\cellcolor{yellow}&...\cellcolor{yellow}&...\cellcolor{yellow}&...\cellcolor{yellow}&...\cellcolor{yellow}&...\cellcolor{yellow}&...&...&...&...\\
\hline
\cellcolor{red}...&\cellcolor{red}...&\cellcolor{red}...&\cellcolor{red}...&\cellcolor{red}...&\cellcolor{red}...&\cellcolor{red}...&\cellcolor{red}...&\cellcolor{red}...&...&...&...&...\\
\hline
...&...&...&...&...&...&...&...&...&...&...&...&...\\
\hline
\end{array}
\]
\end{center}
\textsc{Proof :}Let \((q,n,b) \in (\mathbb{N}^*)^3\), let \( (p,k) \in (\mathbb{N}^*)^2\), let a=q-b. \\
We denote by \(g\) the projection of the equivalence relation induced by the partition of \([\![1,q]\!]\) and \(h\) the
one induced by the partition of \([\![1,p]\!]\). Each equivalence class is represented by a single integer, therefore :
\[ g : [\![1,q]\!] \longrightarrow [\![1,n]\!] \text{ and } (A_{g^{-1}(1)},...A_{g^{-1}(q)})\text{ is a b-WSF-template.}
\]
\[h : [\![1,p]\!] \longrightarrow [\![1,k]\!] \text{ and } \forall (x,y) \in [\![1,q]\!]^2 \text{, } h(x) = h(y)
\Longrightarrow h(x+y) \neq h(x)
\]

Let \( f : [\![1,b+pa]\!] \longrightarrow [\![1,n]\!] \) such as:
\\\\-if x \(\leqslant b \text{ (we will note x} \in \mathcal{T}): f(x)=g(x)\)
\\\\-if \( x \in [\![1,b+pa]\!] \text{ and } \pi(x) \notin A_n \text{ (we will note x} \in \mathcal{C}): f(x)=g(\pi(x))\)
\\\\-if \( x \in [\![1,b+pa]\!]  \text{ and }\pi(x) \in A_n \text{ (we will note x} \in \mathcal{L}): f(x)=n-1+h(\lambda(x))\)
\\\\
f is well defined because \(\pi\) is defined for x\(>b\) and \(\forall x \in \![1,b+pa]\!], f(x)\leqslant n+k-1\) because h(\(\lambda(x))\leqslant k\)

We have parted the integers of \(\![1,b+pa]\!]\) in three disjoints subsets \(\mathcal{T},\mathcal{C} \text{ and } \mathcal{L}\).

We have to verify that f induces weakly-sum-free templates:\\
\\
\underline{if (x,y) \(\in (\mathcal{T})^2\) such that f(x)=f(y), \(x \neq y\), then \(f(x+y)\neq f(x)\)  :}\\
\\x+y\(<\)a+b since b\(<\)a and g(x)=f(x)=f(y)=g(y). 
\\Hence f(x+y)=g(x+y)\(\neq\)g(x)=f(x)
\\\\
\underline{if (x,y) \(\in \mathcal{T} \times \mathcal{C}\) such that f(x)=f(y), \(x \neq y\), then \(f(x+y)\neq f(x)\)  :}\\
We distinguish two cases:


\begin{itemize}
\item If x+\(\pi(y)\leqslant a+b\)
\\g(x)=f(x)=f(y)=g(\(\pi(y)\). Hence g(x)\(\neq g(x+\pi(y))=g(\pi(x+y))\) (qv previous proposition)
\\if \(g(\pi(x+y))=n, f(x+y)\geqslant n > f(x)\)
\\else, \(f(x+y)=g(\pi(x+y))\neq g(x)=f(x)\)
\item If x+\(\pi(y)> a+b\), x+y\(>\)a+b and by definition of g, \(g(\pi(x+y))\neq g(x)\)
\\if \(g(\pi(x+y))=n, f(x+y)\geqslant n > f(x)\)
\\else, \(f(x+y)=g(\pi(x+y))\neq g(\pi(x))=f(x)\)
\end{itemize}


\underline{if (x,y) \(\in \mathcal{T} \times \mathcal{L}\) such that f(x)=f(y), \(x \neq y\), then \(f(x+y)\neq f(x)\)  :}\\
\\Then, f(x)=f(y)=n. We distinguish two cases:


\begin{itemize}
\item If \(\lambda(y)=\lambda(x+y)\),
\\\(g(x)=g(\pi(y))=n \text{ since } g(y)=g(\pi(y))\)
\\Therefore \(g(\pi(x+y))=g(x+\pi(y)) \neq g(x)=n\)(qv previous proposition)
\\Hence \(f(x+y)=g(\pi(x+y))\neq n\)
\item If  \(\lambda(y)\neq \lambda(x+y)\), \(\lambda(y)+1= \lambda(x+y)\)\\
n=f(y)=n-1+h(\(\lambda(y)\)). Hence h(\(\lambda(y)\))=1.
\\Moreover h(1)=1, therefore \(h(\lambda(y)+1) \neq 1\)
\\if \(\pi(x+y) \in A_n\), \(f(x+y)=n-1+h(\lambda(x+y))>n\)
\end{itemize}

\underline{if (x,y) \(\in (\mathcal{C})^2\) such that f(x)=f(y), \(x \neq y\), then \(f(x+y)\neq f(x)\)  :}\\
\\Then  \(g(\pi(x))=f(x)=f(y)=g(\pi(y))\). We distinguish two cases:

\begin{itemize}
\item If \(\pi(x)+\pi(y)>q\), \(g(\pi(\pi(x)+\pi(y)) \neq g(\pi(x))\) (qv previous proposition)
\\Hence \(g(\pi(x+y))= g(\pi(\pi(x)+\pi(y))\neq g(\pi(x))\) 
\\if \(g(\pi(x+y))=n, f(x+y)\geqslant n > f(x)\)
\\else, \(f(x+y)=g(\pi(x+y))\neq g(\pi(x))=f(x)\)
\item If  \(\pi(x)+\pi(y)\leqslant q\), \(g(\pi(\pi(x)+\pi(y)) \neq g(\pi(x))\) since g is sum-free for x\(>b\)
\\if \(g(\pi(x+y))=n, f(x+y)\geqslant n > f(x)\)
\\else, \(f(x+y)=g(\pi(x+y))=g(\pi(\pi(x)+\pi(y))\neq g(\pi(x))=f(x)\)


\end{itemize}



\underline{if (x,y) \(\in \mathcal{C} \times \mathcal{L} \), \(f(x)\neq f(y)\)}\\

\underline{if (x,y) \(\in (\mathcal{L})^2\) such that f(x)=f(y), \(x \neq y\), then \(f(x+y)\neq f(x)\)  :}\\
\\Let r(x)=\(\pi(x)-a\) and r(y)=\(\pi(y)-a\),
\\We proved that \(x=a\lambda(x)+\pi(x)-a\), therefore \(x=a\lambda(x)+\pi(x)\)
\\\(x+y=a(\lambda(x)+\lambda(y))+r(x)+r(y)\). We distinguish three cases:

\begin{itemize}
\item If \(r(x)+r(y) \in [\![b-a+1,b]\!]\), \(h(\lambda(x))=f(x)+1-n=f(y)+1-n=h(\lambda(y))\)
Hence, \(h(\lambda(x)+\lambda(y)) \neq h(\lambda(x))\).
\begin{align*}
 \\\lambda(x+y) & =1+\left\lfloor\dfrac{a(\lambda(x)+\lambda(y))+r(x)+r(y)-b-1}{a}\right\rfloor+1\\
& = \lambda(x)+\lambda(y)+\left\lfloor\dfrac{r(x)+r(y)-b-1}{a}\right\rfloor+1 \\
& = \lambda(x)+\lambda(y) -1 +1 \text{ since } r(x)+r(y) \in [\![b-a+1,b]\!] \\
& =\lambda(x)+\lambda(y)
\end{align*}


\begin{align*}
 \\\text{if f(x+y)\(\geqslant\)n, }f(x+y) & =n-1+h(\lambda(x+y))\\
& =n-1+h(\lambda(x)+\lambda(y)) \\
& \neq n-1+h(\lambda(x))\\
& =f(x)
\end{align*}


\item If \(r(x)+r(y)>b\), \(\pi(x)+\pi(y)>2a+b\)
\\Since g is a b-WSF template, \(g(\pi(\pi(x)+\pi(y))) \neq n\)
\\Therefore, \(g(\pi(x+y)) \neq n\) ie \(x+y \in \mathcal{C}\)
\\Hence \(f(x+y) <n\leqslant f(x)\)
\item If \(r(x)+r(y)\leqslant b-a,\), \(\pi(x)+\pi(y)\leqslant b+a\)
\\Since g is sum-free for x\(>b\), since \(g(\pi(x)) = g(\pi(y))=n\), \(g(\pi(x+y)) \neq g(\pi(x))=n\)
\\Hence, \(f(x+y) <n\leqslant f(x)\)
\end{itemize}

\begin{remark}
There exists a \(c(b) \geqslant \text{min}(A_{k+1} \backslash [\![1,b] - b - 1\) such that \(c(b)\) numbers can be
added at the end of the extended partition.Therefore, we can get a better lower bound by finding a couple \((b,c(b))\)
which maximizes the sum \(b+c(b)\) such that \(WS^+(k+1)=WS_b^+(k+1)\). Hence we have:
	\[ WS(n+k) \geqslant S(n) WS^+(k+1)+b+c(b)\]

\end{remark}


\subsection{New lower bounds for Weak Schur numbers}
Having found suitable templates, which can be found in the appendix, with a SAT solver, we claim that for all \(n \in
\mathbb{N}^*\):
\[
4S(n) + 1 \leqslant WS(n+1)
\]
\[
13S(n) + 8 \leqslant WS(n+2)
\]
\[
42S(n) + 24 \leqslant WS(n+3)
\]
\[
127S(n) + 68 \leqslant WS(n+4)
\]
The first two inequalities are due to Rowley, they are detailed in [2]. Like in 3.3, we compute the lower bounds given
by the previous inequalities for \( n \in [\![8,15]\!] \). The best lower bound for each integer is highlighted.\\
\\
\begin{center}
\begin{tabular}{|*{5}{c|}}
    \hline
	n & 8 & 9 & 10 & 11 \\
	\hline
	\(4S(n-1) + 2 \) & 6722 & 21146 & \cellcolor{yellow} 71214 & \cellcolor{yellow} 243794\\
	\hline
	\(13S(n-2) + 8 \) & \cellcolor{yellow} 6976 & 21848 & 68726 & 231447\\
	\hline
	\(42S(n-3) + 24 \) & 6744 & \cellcolor{yellow} 22536 & 70584 & 222036 \\
	\hline
	\(127S(n-4) + 68 \) & 5656 & 20388 & 68140 & 213428\\
	\hline
	\hline
	n & 12 & 13 & 14 & 15 \\
	\hline
	\(4S(n-1) + 2 \) & \cellcolor{yellow} 815314 & 2554194 & 8045162 & \cellcolor{yellow} 27061154\\
	\hline
	\(13S(n-2) + 8 \) & 792332 & \cellcolor{yellow}2649772 & 8301132 & 26146778 \\
	\hline
	\(42S(n-3) + 24 \) & 747750 & 2559840 & \cellcolor{yellow} 8560800 &  25886224 \\
	\hline
	\(127S(n-4) + 68 \) & 671390 & 2261049 & 7740464 & 25886224 \\
	\hline
\end{tabular}
\end{center}

With \( S(9) \geqslant 17803 \), we found a new lower bound for
\(WS(10)\) using Rowley's inequality. Moreover, the third inequality
gives new lower bounds for \(WS(9)\) and \(WS(14)\). However, the last
inequality doesn't give any better lower bound, even beyond \( n = 15 \)
: the best bounds are always provided by the first three. We highly suspect that these values can be improved by
investigating the search
space further, which would provide new, more effective templates. One
may try to go over this search space using a Monte-Carlo method, as in \cite{Bouzy2015AnAP},
but with a different search space (as we explain in \hyperref[SAT]{SAT section}).
This could be the suject of a future work.
