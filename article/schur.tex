\section{Templates for Schur numbers}
\label{Schur}

\qquad In this section, we use Rowley's template-based constructions \cite{RowleyRamsey} in the context of Schur 
numbers. In order to improve lower bounds for Schur and Ramsey numbers, Rowley introduces special sum-free 
partitions verifying some additional properties which can be extended using a method generalizing Abbott and 
Hanson's construction \cite{AbbottHanson}. Rowley named these partitions "templates", and we keep this name in 
the entire article. We then find new templates and use them to provide new lower bounds for Schur numbers.

\subsection{Definition of \(S^+\)}

\begin{definition}
A SF-template with length \(p\) and \(n\) colors is defined as a partition of \( [\![1,p]\!]\) into \(n\) sum-free subsets 
\(A_1, A_2, ..., A_n\) verifying:
\[
\forall i \in [\![1, n-1]\!], \forall (x,y) \in A_i^2, x+y > p
\Longrightarrow x+y-p \notin A_i
\]
\end{definition}

Here \(n\) is the "special" color: it has less constraints than the other colors. However, please note that \(n\) 
is not necessarily the last color by order of appearance. \(SF\)-templates include Abbott and Hanson's construction \cite{AbbottHanson}
as a special case.

\begin{proposition}
	Let \(n \in [\![2, +\infty[\![\). We define \(S^+(n)\) as the maximal lenght of a SF-template with \(n\) colors. 
	\(S^+(n)\) is well defined and verifies:
	\[
	2S(n-1)+1 \leqslant S^+(n) \leqslant S(n)
	\]
\end{proposition}

\begin{proof}[\textsc{Proof.}]
The lower bound comes from Abbott and Hanson's construction. The upper bound comes from the 
fact that a SF-template with length \(p\) and \(n\) colors is also a partition of \([\![1, p]\!]\) into \(n\) sum-free subsets.
\end{proof}

\begin{remark}
	\(S^+\) and \(S\) have the same asymptotic growth rate.
\end{remark}


\subsection{Construction of Schur partitions using SF-templates}

\qquad Here we state the main result on SF-templates stated by Rowley in the context of Ramsey numbers. It consists 
in the explicit construction of a sum-free partition using a SF-template and a sum-free partition.

\begin{theorem}
	Let \((n,k), (p,q) \in (\mathbb{N}^*)^2\). If there exists a \(SF\)-template with lenght \(p\) and \(k+1\) colors 
	and a partition of \([\![1,q]\!]\) into \(n\) sum-free subsets then there exists a partition of \([\![1,pq+m_{k+1}
	-1]\!]\) into \(n+k\) sum-free subsets. \(m_{k+1}\) is the minimum of the special subset in the \(SF\)-template.
\end{theorem}

Setting \(p = S^+(k+1)\) and \(q = S(n)\) yields the following corollary.

\begin{corollary}
	Let \(n, k \in \mathbb{N}^*\). Then
	\[ S(n+k) \geqslant S^+(k+1)S(n) + m_{k+1} - 1 \]
\end{corollary}

The idea lying beneath this theorem is similar to Abbott and Hanson's contruction \cite{AbbottHanson}. They vertically 
extend a sum-free partition by repeating it and they use an other sum-free partition to color the other half according 
to the line number. This way the "blocks" act as safe areas for each other. We give here an example for \(p = 9\), 
\(q = 4\), \(n = 2\) and \(k = 2\) showing that \(S(2 + 2) \geqslant S(2) (2 S(2) + 1) + S(2)\), both with Abbott 
and Hanson's construction and with a SF-template which is not of this type. In both cases, the special color is grey.

\begin{center}
\textbf{Abbott and Hanson's construction}
\end{center}

\[
\begin{array}{|*{9}{c|}}
	\hline
	\cellcolor{red} 1 & \cellcolor{green} 2 & \cellcolor{green} 3 & \cellcolor{red} 4 & \cellcolor{cyan} 5 & 
	\cellcolor{cyan} 6 & \cellcolor{cyan} 7 & \cellcolor{cyan} 8 & \cellcolor{cyan} 9\\
	\hline
	\cellcolor{red} 10 & \cellcolor{green} 11 & \cellcolor{green} 12 & \cellcolor{red} 13 & \cellcolor{yellow} 14 & 
	\cellcolor{yellow} 15 & \cellcolor{yellow} 16 & \cellcolor{yellow} 17 & \cellcolor{yellow} 18\\
	\hline
	\cellcolor{red} 19 & \cellcolor{green} 20 & \cellcolor{green} 21 & \cellcolor{red} 22 & \cellcolor{yellow} 23 & 
	\cellcolor{yellow} 24 & \cellcolor{yellow} 25 & \cellcolor{yellow} 26 & \cellcolor{yellow} 27\\
	\hline
	\cellcolor{red} 28 & \cellcolor{green} 29 & \cellcolor{green} 30 & \cellcolor{red} 31 & \cellcolor{cyan} 32 & 
	\cellcolor{cyan} 33 & \cellcolor{cyan} 34 & \cellcolor{cyan} 35 & \cellcolor{cyan} 36 \\
	\hline
	\cellcolor{red} 37 & \cellcolor{green} 38 & \cellcolor{green} 39 & \cellcolor{red} 40 \\
	\cline{1-4}
\end{array}
\]

\begin{center}
\begin{tabular}{c c}
	\textbf{Corresponding SF-template} & \textbf{Corresponding sum-free partition} \\
	\begin{tabular}{|*{9}{c|}}
		\hline 
		\cellcolor{red} 1 & \cellcolor{green} 2 & \cellcolor{green} 3 & \cellcolor{red} 4 & \cellcolor{gray!40} 5 & 
		\cellcolor{gray!40} 6 & \cellcolor{gray!40} 7 & \cellcolor{gray!40} 8 & \cellcolor{gray!40} 9 \\
		\hline
	\end{tabular} &
	\begin{tabular}{|*{4}{c|}}
		\hline 
		\cellcolor{cyan} 1 & \cellcolor{yellow} 2 & \cellcolor{yellow} 3 & \cellcolor{cyan} 4 \\
		\hline
	\end{tabular}
\end{tabular}
\end{center}

In the general construction with SF-templates, the special color no longer necessarily contains consecutive 
numbers. However, the special color is still replaced by the colors of the sum-free partition according to the 
line number and the other colors are still vertically extended.

\begin{center}
\textbf{SF-template construction}
\end{center}

\[
\begin{array}{|*{9}{c|}}
	\hline
	\cellcolor{red} 1 & \cellcolor{green} 2 & \cellcolor{green} 3 & \cellcolor{red} 4 & \cellcolor{cyan} 5 & 
	\cellcolor{cyan} 6 & \cellcolor{red} 7 & \cellcolor{cyan} 8 & \cellcolor{cyan} 9\\
	\hline
	\cellcolor{red} 10 & \cellcolor{green} 11 & \cellcolor{green} 12 & \cellcolor{red} 13 & \cellcolor{yellow} 14 & 
	\cellcolor{yellow} 15 & \cellcolor{red} 16 & \cellcolor{yellow} 17 & \cellcolor{yellow} 18\\
	\hline
	\cellcolor{red} 19 & \cellcolor{green} 20 & \cellcolor{green} 21 & \cellcolor{red} 22 & \cellcolor{yellow} 23 & 
	\cellcolor{yellow} 24 & \cellcolor{red} 25 & \cellcolor{yellow} 26 & \cellcolor{yellow} 27\\
	\hline
	\cellcolor{red} 28 & \cellcolor{green} 29 & \cellcolor{green} 30 & \cellcolor{red} 31 & \cellcolor{cyan} 32 & 
	\cellcolor{cyan} 33 & \cellcolor{red} 34 & \cellcolor{cyan} 35 & \cellcolor{cyan} 36 \\
	\hline
	\cellcolor{red} 37 & \cellcolor{green} 38 & \cellcolor{green} 39 & \cellcolor{red} 40 \\
	\cline{1-4}
\end{array}
\]

\begin{center}
\begin{tabular}{c c}
	\textbf{Corresponding SF-template} & \textbf{Corresponding sum-free partition} \\
	\begin{tabular}{|*{9}{c|}}
		\hline 
		\cellcolor{red} 1 & \cellcolor{green} 2 & \cellcolor{green} 3 & \cellcolor{red} 4 & \cellcolor{gray!40} 5 & 
		\cellcolor{gray!40} 6 & \cellcolor{red} 7 & \cellcolor{gray!40} 8 & \cellcolor{gray!40} 9 \\
		\hline
	\end{tabular} &
	\begin{tabular}{|*{4}{c|}}
		\hline 
		\cellcolor{cyan} 1 & \cellcolor{yellow} 2 & \cellcolor{yellow} 3 & \cellcolor{cyan} 4 \\
		\hline
	\end{tabular}
\end{tabular}
\end{center}

We now proceed to prove the above mentioned theorem.\\

\begin{proof}[\textsc{Proof.}]
Denote by \(f\) the colouring associated to the \(SF\)-template of lenght \(p\) and \(g\) the one associated 
to the sum-free partition of \([\![1,q]\!]\); where \(f : [\![1,p]\!] \longrightarrow [\![1,k+1]\!]\) and 
\(g : [\![1,q]\!] \longrightarrow [\![1,n]\!]\).

\par
The sum-free condition is expressed as
\[\forall (x,y) \in [\![1,p]\!]^2, f(x) = f(y) \Longrightarrow f(x+y) \neq f(x)\]
\[\forall (x,y) \in [\![1,q]\!]^2 \text{, } g(x) = g(y) \Longrightarrow g(x+y) \neq g(x)\]

The additionnal constraint for the SF-template is
\[
\forall (x,y) \in [\![1,p]\!]^2, \left\{
\begin{array}{ll}
	f(x) = f(y) \leqslant k \\
	x + y > p
\end{array}
\right. \Longrightarrow f(x+y-p) \neq f(x)
\]

For \(x \in [\![1,pq+m_{k+1}-1]\!]\), write \(x = (\alpha - 1) + u\) for some integers \(\alpha \in \mathbb{Z}\) and 
\(u \in [\![1,p]\!]\). This decomposition is of course unique. \(\alpha\) (resp. \(u\)) can be interpreted as the row 
(resp. column) number of \(x\). Define a new coloring \(h\) as follows
\[
\begin{array}{c c c l}
	h : & [\![1,pq+m_{k+1}-1]\!] & \longrightarrow & [\![1,n+k]\!] \\
	& x & \longmapsto & 
	\left\{ \begin{array}{l l}
		f(u) & \text{if}~f(u) \leqslant k \\
		k + g(\alpha) & \text{if}~f(u) = k + 1 \\
	\end{array} \right.
\end{array}
\]

\(h\) is well-defined since, by definition of \(m_{k+1}\), \(\forall x \in [\![p q + 1, p q + m_{k + 1} - 1 ]\!], f(u) 
\leqslant k\) and therefore \(\forall x \in [\![1,pq+m_{k+1}-1]\!], f(u) = k + 1 \implies \alpha \in [\![1, q]\!]\).

\par
We now prove that \(h\) is a sum-free coloring. Let \(x,y \in [\![1,pq + m_{k+1}-1]\!]\) such that \(h(x) = h(y)\) 
and \(x+y \leqslant pq+m_{k+1}-1\). We claim that \(h(x+y) \neq h(x)\). Write \(x = (\alpha - 1) p + u\) and 
\(y = (\beta - 1) p + v\) where \(\alpha, \beta \in \mathbb{Z}\) and \(u, v \in [\![1,p]\!]\). Distinguish between 
two cases according to the value of \(h(x)\). \\

\noindent \underline{\textbf{First case:} \(h(x) \leqslant k\)} \\
\qquad Assume that \(h(x+y) \leqslant k\), otherwise \(h(x + y) \neq h(x)\) obviously holds. By definition of \(h\) 
and given that \(h(u) = h(v)\), \(f(u) = f(v)\). Distinguish between two cases according to the value of \(x + y\).

\begin{itemize}
\item If \(u + v > p\), write \(w = u + v - p \in [\![1, p]\!]\). Then \(x + y = (\alpha + \beta - 1) p + w\). By definition, 
	\(h(x + y) = f(w)\). Given that \(f(u) = f(v) \leqslant k\), the additionnal constraint on \(f\) implies \(f(w) 
	\neq f(u)\), that is \(h(x + y) \neq h(x)\).
\item If \(u + v \leqslant p\), write \(w = u + v \in [\![1, p]\!]\). Then \(x+y = (\alpha + \beta- 2) p + w\). By definition, 
	\(h(x + y) = f(w)\). Given that \(f(u) = f(v) \leqslant k\), the sum-free property of \(f\) implies \(f(w) \neq f(u)\), 
	that is \(h(x + y) \neq h(x)\).
\end{itemize} 
  
\noindent \underline{\textbf{Second case:} \(h(x) \geqslant k + 1\)} \\
\qquad \(h(x) = k + g(\alpha) = 
k + g(\beta) = h(y)\), hence \(g(\alpha) = g(\beta)\). As in the first case, distinguish between two cases according 
to the value of \(x + y\).

\begin{itemize}
\item If \(u + v > p\), write \(w = u + v - p \in [\![1, p]\!]\). Then \(x + y = (\alpha + \beta - 1) p + w\). Assume that 
	\(h(x+y) \geqslant k + 1\),  otherwise \(h(x + y) \neq h(x)\) obviously holds. By definition, \(h(x + y) = k + g(\alpha + 
	\beta)\). Given that \(g(\alpha) = g(\beta)\), the sum-free property of \(g\) implies \(g(\alpha + \beta) 
	\neq g(\alpha)\) that is \(h(x + y) \neq h(x)\).
\item  If \(u + v \leqslant p\), write \(w = u + v \in [\![1, p]\!]\). Then \(x+y = (\alpha + \beta- 2) p + w\). The sum-free 
	property of \(f\) implies \(f(w) \neq f(u)\). Therefore \(f(w) \leqslant k\) and thus \(h(x + y) \leqslant k\). In particular,
	given that \(h(x) \geqslant k + 1\), \(h(x + y) \neq h(x)\).
\end{itemize}
\end{proof}

The following proposition can help improve the additive constant of a SF-template. Although it does not allow us to 
improve the SF-templates we have found, the analogous of this proposition for WSF-templates (see next section) 
allows us to improve one of them.

\begin{proposition}
Let \((k, p) \in \mathbb{N}^*)^2\) and let \(f\) be a colouring associated to a SF-template of length \(p\) with \(k+1\) 
colors. Let \(b \in \mathbb{N}\) (\(b = m_{k+1} - 1\) works) and assume there there exists a colouring \(g\) of 
\([\![1, b]\!]\) with \(k+1\) colors such that:

\begin{itemize}
	\item \(\forall (x, y) \in [\![1, p]\!]^2,(f(x) = f(y) \text{ and } (x + y) \mod p \leqslant b) 
	\implies g((x + y) \mod p) \neq f(x)\)
	\item \(\forall (x, y) \in [\![1, p]\!] \times  [\![1, b]\!], (f(x) = g(y) \text{ and } x + y \leqslant b) 
	\implies g(x + y) \neq f(x)\)
\end{itemize}

Then, for every \(n \in \mathbb{N}^*\), by using on the last row the colouring \(i \longmapsto g(i - p S(n))\), we have
\[ S(n+k) \geqslant S^+(k+1)S(n) + b\]
\end{proposition}

This proposition corresponds to the fact that sometimes a column is not the sum of two columns of a given color, but adding this 
column to the color would create sums in the color when applying the extension procedure. However, the last line does not 
intereact will all the columns when it comes to creating new sums. As a result, the hypotheses made on the colouring of the last 
row can be weakened.

We also have a similar construction theorem where only \(S^+\) is involved.

\begin{theorem}
	Let \((n,k), (p,q) \in (\mathbb{N}^*)^2\). If there exists a \(SF\)-template of \(k+1\) colors and lenght \(p\),
	and \(SF\)-template of \(n\) color and lenght \(q\), then there exists \(SF\)-template of \((n+k)\) and lenght \(pq\).
\end{theorem}

And the associated inequality :

\begin{corollary}
	Let \(n, k \in \mathbb{N}^*\), we have \\
	\[ S^+(n+k) \geqslant S^+(k+1)S^+(n) \]
\end{corollary}

\begin{proof}[\textsc{Proof.}]
The idea is the same as in the previous theorem. The only difference is the SF property inherited 
from the second SF-template.
\end{proof}


\subsection{Inequalities and new lower bounds for Schur numbers}

\begin{definition}
A SF-template with \(n\) colors is said to be symmetric if the partition in \(n\) sum-free subsets derived (with the additive constant) from this template is symmetric. 
A sum-free partition \(A_1, ..., A_n\) of \([\![1, p]\!]\) is said to be symmetric if for all \( x \in [\![1, p]\!]\), \(x\) and \(p + 1 - x\) belong to the same subset 
(except if \(x = p + 1 - x\)).
\end{definition}

Using a SAT solver, we exhibited SF-templates, hence providing lower bound on \(S^+\) and inequalities 
of the type \(S(n+k) \geqslant a S(n) + b\). We have sought templates providing the greatest value of 
\((a, b)\) (for the lexicographic order). When the number of colors excceeded 5, in order to reduce the search space we 
looked for symmetric SF-templates, we assumed that the special color was the last color to appear and we constrained 
the \(m_c\)'s out of being too small. Further details about the encoding as a SAT problem can be found in \cite{Heule2017}.

\par
Here are the best inequalities on Schur numbers so far (the templates corresponding to the third, fourth and fifth 
inequalities can be found in the appendix):
\[
\begin{array}{r r r r r}
	S(n + 1) & \geqslant & 3 S(n) & + & 1 \\
	S(n + 2) & \geqslant & 9 S(n) & + & 4 \\
	S(n + 3) & \geqslant & 33 S(n) & + & 6 \\
	S(n + 4) & \geqslant & 111 S(n) & + & 43 \\
	S(n + 5) & \geqslant & 380 S(n) & + & 148 \\
	S(n + 6) & \geqslant & 1140 S(n) & + & 528 \\
\end{array}
\]

The first inequality comes from  Schur's original article\cite{Schur1917}. The second one is due to
Abott \cite{AbbottHanson}
and the third one to Rowley \cite{RowleyRamsey}. The other ones are new.

\par
The first 3 inequalities are optimal. The fourth one is optimal among symmetric SF-templates whose special color is 
the last in the order of apparition (and with a multiplicative factor less than or equal to 118). The fifth one is most 
likely not optimal but should not be too far from the optimal. 
Finally, the sixth one is obtained by combining (see below) the SF-template of length 380 and the one of length 3. 
Although we could not find a better SF-template with 7 colors, the last inequality is definetely very far from the 
optimal value. One may try to seek better templates by constraining less the search space and by using 
Monte-Carlo methods, as in \cite{Bouzy2015AnAP}. This could be the suject of a future work.

\par
The previous inequalities give new lower bounds for \(S(n)\) for
\( n \geqslant 9 \). We compute the lower
bounds for \( n \in [\![8,15]\!] \) using the four different inequalities, please notice that the best values for \( n
=8\) and \(n = 13\) were obtained thanks to the first one, found by Rowley. The best lower bounds are highlighted.

\begin{center}
\begin{tabular}{|*{5}{c|}}
    \hline
	\(n\) & 8 & 9 & 10 & 11 \\
	\hline
	\(33S(n-3) + 6 \) & \cellcolor{yellow} 5286 & 17694 & 55446 & 174444\\
	\hline
	\(111S(n-4) + 43 \) & 4927 & \cellcolor{yellow} 17803 & 59539 & 186523\\
	\hline
	\(380S(n-5) + 148 \) & 5088 & 16868 & \cellcolor{yellow} 60948 & \cellcolor{yellow} 203828 \\
	\hline
	\(1140S(n-6) + 528 \) & 5088 & 15348 & 50688 & 182928\\
	\hline
	\hline
	\(n\) & 12 & 13 & 14 & 15 \\
	\hline
	\(33S(n-3) + 6 \) & 587505 & \cellcolor{yellow} 2011290 & 6726330 & 21072090\\
	\hline
	\(111S(n-4) + 43 \) & 586789 & 1976176 & 6765271 & 22624951 \\
	\hline
\(380S(n-5) + 148 \) & \cellcolor{yellow} 638548 & 2008828 & \cellcolor{yellow} 6765288 & \cellcolor{yellow} 23160388 \\\hline
	\(1140S(n-6) + 528 \) & 611568 & 1915728 & 6026568 & 20295948 \\
	\hline
\end{tabular}
\end{center}

Except for 8, 9 and 13, the best lower bounds are obtained thanks to
the third inequality \( S(n+5) \geqslant 380S(n) + 148\). The table
doesn't go any further, but the same inequality allows to improve the
lower bounds for every \( n \geqslant 15 \).

\begin{corollary}
The growth rate for Schur numbers (and Ramsey numbers \(R_n(3)\))  satisfies \(\gamma \geqslant \sqrt[5]{380} \approx 3.28\).
\end{corollary}

\begin{proof}[\textsc{Proof.}]
It is a mere consequence of the inequality \( S(n+5) \geqslant 380S(n) + 148\). As for Ramsey
numbers, the following inequality holds \(S(n) \leqslant R_n(3) - 2\) (see \cite{AbbottHanson}).
\end{proof}


\subsection{Conclusion on SF-templates}

\qquad In this section, we first formalized Rowley's template-based constructions \cite{RowleyRamsey} in the context of Schur numbers 
by introducing SF-templates as well as a new sequence, \(S^+\). We provided relations between \(S^+\) and \(S\) then 
stated Rowley's construction method in the context of Schur numbers. We found new SF-templates allowing us to obtain 
new lower bounds for schur numbers. One may notice that we mostly gave only lower bounds for \(S^+\). It should be possible to 
find better SF-templates by making different assumptions or using a different method (Monte-Carlo methods for instance).

\par
In the next section, we provide similar results for weak Schur numbers. We introduce WSF-templates and a corresponding sequence, 
\(WS^+\). We then derive similar relations and construction method allowing us to find new lower bounds for weak Schur numbers.
